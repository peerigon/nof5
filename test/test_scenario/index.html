<!DOCTYPE>

<html>
<head>
    <title>Test Scenario</title>

    <link rel="stylesheet" href="assets/mocha-1.3.0.css" />

    <script type="text/javascript" src="assets/jquery-1.7.2.js"></script>

    <script type="text/javascript" src="assets/mocha-1.3.0.js"></script>

    <script type="text/javascript" src="tests.js"></script>

    <script>
        jQuery(function () {
            mocha.setup({
                ui:"bdd",
                globals: ["io"]
            });

            nof5.enableTests();

            mocha.Runner.prototype.on("fail", function onFail(test) {

                mocha.Runner.prototype.once("test end", function () {

                    console.log(test);

                    var emitableError = {
                        "title": test.title,
                        "error": test.err.toString()

                    };

                    nof5.socket.emit("fail", navigator.userAgent, emitableError);

                });

            });

            mocha.Runner.prototype.on("suite end", function onSuiteEnd(suite) {
                if (suite.root) {
                    nof5.socket.emit("suite end", navigator.userAgent);
                }
            });

            mocha.run();
        });
    </script>

</head>
<body>
    <div id="mocha">

    </div>
</body>
</html>